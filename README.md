# 時間旅行する宇宙人レジオナリーゲーム

## 概要

このゲームは、時間を旅する宇宙人レジオナリーの冒険を描いています。彼は古代ローマの異なる時代を体験しながら、敵と戦い、過去・現在・未来をつなぐ謎めいた陰謀を解き明かしていきます。

## ゲーム構造

### シーン管理

ゲームは、異なるゲーム状態を扱う様々なシーン（メニュー、プレイ、ゲームオーバー、ストーリーテキスト）を使用したアーキテクチャを採用しています。中心となるのは`Scene_Play`で、ゲームプレイ、エンティティ、衝突判定、会話を管理します。

### エンティティ・コンポーネントシステム

- **エンティティ**: 基本的なゲームオブジェクト（プレイヤー、敵、障害物など）
- **コンポーネント**: エンティティの動作を定義する構成要素（CTransform、CAnimation、CStateなど）
- **システム**: 特定のコンポーネントを持つエンティティを処理する（AnimationSystem、CollisionSystemなど）

## 主な機能

### レベル構造

ゲームは複数の時代を通じて進行します：
- **宇宙人のローマ**: 開始地点。謎の暗黒戦士による侵略を受けています
- **古代ローマ**: プレイヤーがブラックホールに入った後、最初に時間旅行する場所
- **未来のローマ**: 過去でのプレイヤーの行動によって作られたパラドックスの時間軸

### プレイヤーの機能

- 基本的な移動（左/右/ジャンプ）と運動量ベースの物理挙動
- 剣による近接戦闘
- スタミナを使用した防御メカニズム
- 特殊能力（未来のローマにて）：
  - バーストファイア射撃
  - 必殺技

### 敵AI システム

`EnemyAISystem`は様々な敵の行動を制御します：

1. **基本的な敵**:
   - 境界内でのパトロール
   - 探知範囲内にプレイヤーがいると追跡
   - 攻撃可能距離内に入ると攻撃

2. **エリート敵**:
   - より攻撃的な追跡
   - より長い射程の特殊攻撃
   - より高い体力とダメージ

3. **ボス敵**:
   - フェーズベースの戦闘
   - 特殊な攻撃パターン
   - 特定の体力閾値でダイアログをトリガー

### ダイアログシステム

インタラクティブなダイアログシステムがキャラクター会話を通してストーリーを展開します：
- 複数言語対応（英語/日本語）
- 位置とイベントに基づくダイアログトリガー
- カスタマイズ可能なテキスト書式を備えたキャラクターポートレート
- ボス戦やストーリーの重要な瞬間の特別なダイアログ

### カメラシステム

- プレイヤーを追跡するスムーズな追従カメラ
- 最適な視野のためのズームとオフセット設定
- レベル境界外を見せないカメラ境界

### リソース管理

- ビジュアルフィードバック付きの体力システム
- 防御行動用のスタミナ
- 閾値報酬を持つスコアシステム
- コンテナ内で見つかるアイテムとパワーアップ

### ビジュアルエフェクト

- スムーズなキャラクター動作用のアニメーションシステム
- 衝撃や特殊技のためのパーティクルエフェクト
- 各時代に固有の環境ビジュアル

## 操作方法

- **A/D**: 左右移動
- **W**: ジャンプ
- **Space**: 攻撃（未来のローマではバーストファイアにも使用）
- **M**: 防御（スタミナを消費）
- **Enter**: 必殺技（未来のローマのみ）
- **G**: グリッド表示の切り替え（デバッグ用）
- **B**: バウンディングボックスの切り替え（デバッグ用）

## レベルデザイン

各レベルの特徴：
- 異なる時代を表す独自の背景
- 正確なジャンプが必要なプラットフォームと障害物
- 戦略的な戦闘のための敵の配置
- チェストやコンテナ内のアイテムとパワーアップ
- ダイアログとボス戦を通したストーリー進行

## 技術的実装

### 物理システム

- 重力ベースの移動
- プラットフォームの衝突検出
- 運動量と速度の計算

### 衝突システム

- バウンディングボックスによる衝突検出
- エンティティタイプに基づく異なる衝突応答
- 攻撃タイプに基づくダメージ計算

### スポーンシステム

- 指定ポイントでの動的な敵スポーン
- 破壊されたコンテナからのアイテム生成
- 敵の死亡やアイテム出現のビジュアルエフェクト

### ゲーム状態管理

- 異なるゲーム状態間のシーン遷移
- レベル進行のためのセーブ/ロード機能
- レベル間のスコア追跡

## 開発ガイドライン

- 新しいゲーム要素にはエンティティ・コンポーネントシステムを使用
- ストーリー追加には確立されたダイアログ形式に従う
- 予測可能なゲームプレイのために一貫した物理パラメータを維持
- すべてのゲームレベルとシーンで徹底的にテスト

## 将来の拡張

- 追加の時代と代替タイムライン
- 独自の行動を持つ新たな敵タイプ
- 拡張されたダイアログとストーリーブランチ
